{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import WelcomeScreen from'./components/WelcomeScreen';import NameFormScreen from'./components/NameFormScreen';import HoldingScreen from'./components/HoldingScreen';import StartingScreen from'./components/StartingScreen';import GameState from'./components/GameState';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[currentScreen,setCurrentScreen]=useState('welcome');const[playerName,setPlayerName]=useState('');const[isReady,setIsReady]=useState(false);const[userList,setUserList]=useState([]);useEffect(()=>{// Fetch the initial list of users from the server\naxios.get('/api/users').then(response=>{setUserList(response.data);}).catch(error=>{console.error('Error fetching user list:',error);});// Set up SSE connection\nconst eventSource=new EventSource('/events');eventSource.onmessage=event=>{const data=JSON.parse(event.data);if(data.type==='userList'){setUserList(data.users);}};return()=>{eventSource.close();};},[]);const joinGame=()=>{setCurrentScreen('nameForm');};const submitName=name=>{axios.post('/submit-name',{displayName:name}).then(response=>{setPlayerName(name);setUserList(response.data.users);setCurrentScreen('holding');}).catch(error=>{console.error('Error submitting name:',error);});};const setReady=()=>{axios.post('/set-ready',{displayName:playerName}).then(response=>{setIsReady(true);setCurrentScreen('starting');}).catch(error=>{console.error('Error setting ready status:',error);});};return/*#__PURE__*/_jsxs(\"div\",{children:[currentScreen==='welcome'&&/*#__PURE__*/_jsx(WelcomeScreen,{joinGame:joinGame}),currentScreen==='nameForm'&&/*#__PURE__*/_jsx(NameFormScreen,{onSubmit:submitName}),currentScreen==='holding'&&/*#__PURE__*/_jsx(HoldingScreen,{message:\"Waiting for players...\",userList:userList,onReady:setReady}),currentScreen==='starting'&&/*#__PURE__*/_jsx(StartingScreen,{}),isReady&&/*#__PURE__*/_jsx(GameState,{})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","WelcomeScreen","NameFormScreen","HoldingScreen","StartingScreen","GameState","jsx","_jsx","jsxs","_jsxs","App","currentScreen","setCurrentScreen","playerName","setPlayerName","isReady","setIsReady","userList","setUserList","get","then","response","data","catch","error","console","eventSource","EventSource","onmessage","event","JSON","parse","type","users","close","joinGame","submitName","name","post","displayName","setReady","children","onSubmit","message","onReady"],"sources":["/Users/baijianqing/VSC/The-Retro-Retro-Game/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport WelcomeScreen from './components/WelcomeScreen';\nimport NameFormScreen from './components/NameFormScreen';\nimport HoldingScreen from './components/HoldingScreen';\nimport StartingScreen from './components/StartingScreen';\nimport GameState from './components/GameState';\n\nfunction App() {\n    const [currentScreen, setCurrentScreen] = useState('welcome');\n    const [playerName, setPlayerName] = useState('');\n    const [isReady, setIsReady] = useState(false);\n    const [userList, setUserList] = useState([]);\n\n    useEffect(() => {\n        // Fetch the initial list of users from the server\n        axios.get('/api/users')\n            .then(response => {\n                setUserList(response.data);\n            })\n            .catch(error => {\n                console.error('Error fetching user list:', error);\n            });\n\n        // Set up SSE connection\n        const eventSource = new EventSource('/events');\n        eventSource.onmessage = (event) => {\n            const data = JSON.parse(event.data);\n            if (data.type === 'userList') {\n                setUserList(data.users);\n            }\n        };\n\n        return () => {\n            eventSource.close();\n        };\n    }, []);\n\n    const joinGame = () => {\n        setCurrentScreen('nameForm');\n    };\n\n    const submitName = (name) => {\n        axios.post('/submit-name', { displayName: name })\n            .then(response => {\n                setPlayerName(name);\n                setUserList(response.data.users);\n                setCurrentScreen('holding');\n            })\n            .catch(error => {\n                console.error('Error submitting name:', error);\n            });\n    };\n\n    const setReady = () => {\n        axios.post('/set-ready', { displayName: playerName })\n            .then(response => {\n                setIsReady(true);\n                setCurrentScreen('starting');\n            })\n            .catch(error => {\n                console.error('Error setting ready status:', error);\n            });\n    };\n\n    return (\n        <div>\n            {currentScreen === 'welcome' && <WelcomeScreen joinGame={joinGame} />}\n            {currentScreen === 'nameForm' && <NameFormScreen onSubmit={submitName} />}\n            {currentScreen === 'holding' && <HoldingScreen message=\"Waiting for players...\" userList={userList} onReady={setReady} />}\n            {currentScreen === 'starting' && <StartingScreen />}\n            {isReady && <GameState />}\n        </div>\n    );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}