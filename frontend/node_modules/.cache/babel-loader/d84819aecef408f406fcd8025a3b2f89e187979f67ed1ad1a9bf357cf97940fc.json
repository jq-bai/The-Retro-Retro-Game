{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import WelcomeScreen from'./components/WelcomeScreen';import NameFormScreen from'./components/NameFormScreen';import HoldingScreen from'./components/HoldingScreen';import StartingScreen from'./components/StartingScreen';import GameStateInitial from'./components/GameStateInitial';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[currentScreen,setCurrentScreen]=useState('welcome');const[playerName,setPlayerName]=useState('');const[isReady,setIsReady]=useState(false);const[userList,setUserList]=useState([]);const[eventSource,setEventSource]=useState(null);const joinGame=()=>{setCurrentScreen('nameForm');};const submitName=name=>{axios.post('/submit-name',{displayName:name}).then(response=>{setPlayerName(name);setUserList(response.data.users);setCurrentScreen('holding');// Set up SSE connection after user has entered their display name\nconst newEventSource=new EventSource(`/events?displayName=${name}`);newEventSource.onmessage=event=>{const data=JSON.parse(event.data);if(data.type==='userList'){setUserList(data.users);}else if(data.type==='startGame'){setCurrentScreen('starting');}};setEventSource(newEventSource);}).catch(error=>{console.error('Error submitting name:',error);});};const setReady=()=>{axios.post('/set-ready',{displayName:playerName}).then(response=>{setIsReady(prevIsReady=>!prevIsReady);}).catch(error=>{console.error('Error setting ready status:',error);});};useEffect(()=>{// Clean up the EventSource connection when the component unmounts\nreturn()=>{if(eventSource){eventSource.close();}};},[eventSource]);return/*#__PURE__*/_jsxs(\"div\",{children:[currentScreen==='welcome'&&/*#__PURE__*/_jsx(WelcomeScreen,{joinGame:joinGame}),currentScreen==='nameForm'&&/*#__PURE__*/_jsx(NameFormScreen,{onSubmit:submitName}),currentScreen==='holding'&&/*#__PURE__*/_jsx(HoldingScreen,{message:\"Waiting for players...\",userList:userList,onReady:setReady,isReady:isReady}),currentScreen==='starting'&&/*#__PURE__*/_jsx(StartingScreen,{userList:userList,onCountdownComplete:()=>setCurrentScreen('gameState')}),currentScreen==='gameState'&&/*#__PURE__*/_jsx(GameStateInitial,{userList:userList})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","WelcomeScreen","NameFormScreen","HoldingScreen","StartingScreen","GameStateInitial","jsx","_jsx","jsxs","_jsxs","App","currentScreen","setCurrentScreen","playerName","setPlayerName","isReady","setIsReady","userList","setUserList","eventSource","setEventSource","joinGame","submitName","name","post","displayName","then","response","data","users","newEventSource","EventSource","onmessage","event","JSON","parse","type","catch","error","console","setReady","prevIsReady","close","children","onSubmit","message","onReady","onCountdownComplete"],"sources":["/Users/baijianqing/VSC/The-Retro-Retro-Game/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport WelcomeScreen from './components/WelcomeScreen';\nimport NameFormScreen from './components/NameFormScreen';\nimport HoldingScreen from './components/HoldingScreen';\nimport StartingScreen from './components/StartingScreen';\nimport GameStateInitial from './components/GameStateInitial';\n\nfunction App() {\n    const [currentScreen, setCurrentScreen] = useState('welcome');\n    const [playerName, setPlayerName] = useState('');\n    const [isReady, setIsReady] = useState(false);\n    const [userList, setUserList] = useState([]);\n    const [eventSource, setEventSource] = useState(null);\n\n    const joinGame = () => {\n        setCurrentScreen('nameForm');\n    };\n\n    const submitName = (name) => {\n        axios.post('/submit-name', { displayName: name })\n            .then(response => {\n                setPlayerName(name);\n                setUserList(response.data.users);\n                setCurrentScreen('holding');\n\n                // Set up SSE connection after user has entered their display name\n                const newEventSource = new EventSource(`/events?displayName=${name}`);\n                newEventSource.onmessage = (event) => {\n                    const data = JSON.parse(event.data);\n                    if (data.type === 'userList') {\n                        setUserList(data.users);\n                    } else if (data.type === 'startGame') {\n                        setCurrentScreen('starting');\n                    }\n                };\n                setEventSource(newEventSource);\n            })\n            .catch(error => {\n                console.error('Error submitting name:', error);\n            });\n    };\n\n    const setReady = () => {\n        axios.post('/set-ready', { displayName: playerName })\n            .then(response => {\n                setIsReady(prevIsReady => !prevIsReady);\n            })\n            .catch(error => {\n                console.error('Error setting ready status:', error);\n            });\n    };\n\n    useEffect(() => {\n        // Clean up the EventSource connection when the component unmounts\n        return () => {\n            if (eventSource) {\n                eventSource.close();\n            }\n        };\n    }, [eventSource]);\n\n    return (\n        <div>\n            {currentScreen === 'welcome' && <WelcomeScreen joinGame={joinGame} />}\n            {currentScreen === 'nameForm' && <NameFormScreen onSubmit={submitName} />}\n            {currentScreen === 'holding' && <HoldingScreen message=\"Waiting for players...\" userList={userList} onReady={setReady} isReady={isReady} />}\n            {currentScreen === 'starting' && <StartingScreen userList={userList} onCountdownComplete={() => setCurrentScreen('gameState')} />}\n            {currentScreen === 'gameState' && <GameStateInitial userList={userList} />}\n        </div>\n    );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}