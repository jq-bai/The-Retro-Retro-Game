{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GameStateInitial=_ref=>{let{userList,displayName}=_ref;const prompts=[\"Describe the past month of work\",\"Describe crybaby\",\"Describe bill split\",\"Describe onboarding\",\"Describe tokens\",\"Describe the huddle room\",\"Describe the roadmap\",\"Describe the current workflow process\",\"Describe your current project\",\"Describe Figma\"];const[currentPrompt,setCurrentPrompt]=useState(\"Click to Reveal Your Prompt\");const[isClicked,setIsClicked]=useState(false);const eventSourceRef=useRef(null);useEffect(()=>{console.log(\"Game has started\");if(!eventSourceRef.current){const eventSource=new EventSource(`/events?displayName=${encodeURIComponent(displayName)}`);eventSourceRef.current=eventSource;eventSource.onmessage=event=>{const data=JSON.parse(event.data);// Handle other event types if needed\n};eventSource.onerror=error=>{console.error(\"EventSource failed:\",error);eventSource.close();eventSourceRef.current=null;};return()=>{eventSource.close();eventSourceRef.current=null;};}},[displayName]);const handlePromptClick=()=>{if(!isClicked){const randomPrompt=prompts[Math.floor(Math.random()*prompts.length)];setCurrentPrompt(randomPrompt);setIsClicked(true);}};useEffect(()=>{console.log(\"All clients loaded\");},[userList]);return/*#__PURE__*/_jsxs(\"div\",{className:\"hero center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-grid\",children:userList.filter(user=>user.displayName).map(user=>/*#__PURE__*/_jsxs(\"div\",{className:\"user-card-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-card\",children:user.displayName}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"cta\",children:\"Vote\"})]},user.displayName))}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"prompt-card center\",onClick:handlePromptClick,children:/*#__PURE__*/_jsx(\"h2\",{children:currentPrompt})})})]});};export default GameStateInitial;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","GameStateInitial","_ref","userList","displayName","prompts","currentPrompt","setCurrentPrompt","isClicked","setIsClicked","eventSourceRef","console","log","current","eventSource","EventSource","encodeURIComponent","onmessage","event","data","JSON","parse","onerror","error","close","handlePromptClick","randomPrompt","Math","floor","random","length","className","children","filter","user","map","onClick"],"sources":["/Users/baijianqing/VSC/The-Retro-Retro-Game/frontend/src/components/GameStateInitial.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nconst GameStateInitial = ({ userList, displayName }) => {\n    const prompts = [\n        \"Describe the past month of work\",\n        \"Describe crybaby\",\n        \"Describe bill split\",\n        \"Describe onboarding\",\n        \"Describe tokens\",\n        \"Describe the huddle room\",\n        \"Describe the roadmap\",\n        \"Describe the current workflow process\",\n        \"Describe your current project\",\n        \"Describe Figma\",\n    ];\n\n    const [currentPrompt, setCurrentPrompt] = useState(\"Click to Reveal Your Prompt\");\n    const [isClicked, setIsClicked] = useState(false);\n    const eventSourceRef = useRef(null);\n\n    useEffect(() => {\n        console.log(\"Game has started\");\n\n        if (!eventSourceRef.current) {\n            const eventSource = new EventSource(`/events?displayName=${encodeURIComponent(displayName)}`);\n            eventSourceRef.current = eventSource;\n\n            eventSource.onmessage = (event) => {\n                const data = JSON.parse(event.data);\n                // Handle other event types if needed\n            };\n\n            eventSource.onerror = (error) => {\n                console.error(\"EventSource failed:\", error);\n                eventSource.close();\n                eventSourceRef.current = null;\n            };\n\n            return () => {\n                eventSource.close();\n                eventSourceRef.current = null;\n            };\n        }\n    }, [displayName]);\n\n    const handlePromptClick = () => {\n        if (!isClicked) {\n            const randomPrompt = prompts[Math.floor(Math.random() * prompts.length)];\n            setCurrentPrompt(randomPrompt);\n            setIsClicked(true);\n        }\n    };\n\n    useEffect(() => {\n        console.log(\"All clients loaded\");\n    }, [userList]);\n\n    return (\n        <div className=\"hero center\">\n            <div className=\"user-grid\">\n                {userList.filter(user => user.displayName).map(user => (\n                    <div key={user.displayName} className=\"user-card-container\">\n                        <div className=\"user-card\">\n                            {user.displayName}\n                        </div>\n                        <br />\n                        <button className=\"cta\">Vote</button>\n                    </div>\n                ))}\n            </div>\n            <br />\n            <br />\n            <br />\n            <br />\n            <div>\n                <div className=\"prompt-card center\" onClick={handlePromptClick}>\n                    <h2>{currentPrompt}</h2>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default GameStateInitial;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}