{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GameStateInitial=_ref=>{let{userList}=_ref;const prompts=[\"Describe the past month of work\",\"Describe crybaby\",\"Describe bill split\",\"Describe onboarding\",\"Describe tokens\",\"Describe the huddle room\",\"Describe the roadmap\",\"Describe the current workflow process\",\"Describe your current project\",\"Describe Figma\"];const[currentPrompt,setCurrentPrompt]=useState(\"Click to Reveal Your Prompt\");const[isClicked,setIsClicked]=useState(false);const[votes,setVotes]=useState(0);const[hasVoted,setHasVoted]=useState({});useEffect(()=>{const eventSource=new EventSource(\"/events\");eventSource.onmessage=event=>{const data=JSON.parse(event.data);if(data.type===\"voteCount\"){setVotes(data.votes);const votedUsers=data.users.reduce((acc,user)=>{acc[user.displayName]=user.voted;return acc;},{});setHasVoted(votedUsers);}};return()=>{eventSource.close();};},[]);const handlePromptClick=()=>{if(!isClicked){const randomPrompt=prompts[Math.floor(Math.random()*prompts.length)];setCurrentPrompt(randomPrompt);setIsClicked(true);}};const handleVoteClick=async displayName=>{await fetch(\"/vote\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({displayName})});};return/*#__PURE__*/_jsxs(\"div\",{className:\"hero center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-grid\",children:userList.filter(user=>user.displayName).map(user=>/*#__PURE__*/_jsxs(\"div\",{className:\"user-card-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-card\",children:user.displayName}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"cta\",onClick:()=>handleVoteClick(user.displayName),disabled:hasVoted[user.displayName],children:hasVoted[user.displayName]?\"Voted\":\"Vote\"})]},user.displayName))}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h2\",{children:[\" \",votes,\" out of \",userList.length,\" people have voted \"]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"prompt-card center\",onClick:handlePromptClick,children:/*#__PURE__*/_jsx(\"h2\",{children:currentPrompt})})})]});};export default GameStateInitial;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","GameStateInitial","_ref","userList","prompts","currentPrompt","setCurrentPrompt","isClicked","setIsClicked","votes","setVotes","hasVoted","setHasVoted","eventSource","EventSource","onmessage","event","data","JSON","parse","type","votedUsers","users","reduce","acc","user","displayName","voted","close","handlePromptClick","randomPrompt","Math","floor","random","length","handleVoteClick","fetch","method","headers","body","stringify","className","children","filter","map","onClick","disabled"],"sources":["/Users/baijianqing/VSC/The-Retro-Retro-Game/frontend/src/components/GameStateInitial.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst GameStateInitial = ({ userList }) => {\n    const prompts = [\n        \"Describe the past month of work\",\n        \"Describe crybaby\",\n        \"Describe bill split\",\n        \"Describe onboarding\",\n        \"Describe tokens\",\n        \"Describe the huddle room\",\n        \"Describe the roadmap\",\n        \"Describe the current workflow process\",\n        \"Describe your current project\",\n        \"Describe Figma\",\n    ];\n\n    const [currentPrompt, setCurrentPrompt] = useState(\"Click to Reveal Your Prompt\");\n    const [isClicked, setIsClicked] = useState(false);\n    const [votes, setVotes] = useState(0);\n    const [hasVoted, setHasVoted] = useState({});\n\n    useEffect(() => {\n        const eventSource = new EventSource(\"/events\");\n\n        eventSource.onmessage = (event) => {\n            const data = JSON.parse(event.data);\n            if (data.type === \"voteCount\") {\n                setVotes(data.votes);\n                const votedUsers = data.users.reduce((acc, user) => {\n                    acc[user.displayName] = user.voted;\n                    return acc;\n                }, {});\n                setHasVoted(votedUsers);\n            }\n        };\n\n        return () => {\n            eventSource.close();\n        };\n    }, []);\n\n    const handlePromptClick = () => {\n        if (!isClicked) {\n            const randomPrompt = prompts[Math.floor(Math.random() * prompts.length)];\n            setCurrentPrompt(randomPrompt);\n            setIsClicked(true);\n        }\n    };\n\n    const handleVoteClick = async (displayName) => {\n        await fetch(\"/vote\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({ displayName }),\n        });\n    };\n\n    return (\n        <div className=\"hero center\">\n            <div className=\"user-grid\">\n                {userList.filter(user => user.displayName).map(user => (\n                    <div key={user.displayName} className=\"user-card-container\">\n                        <div className=\"user-card\">\n                            {user.displayName}\n                        </div>\n                        <br />\n                        <button\n                            className=\"cta\"\n                            onClick={() => handleVoteClick(user.displayName)}\n                            disabled={hasVoted[user.displayName]}\n                        >\n                            {hasVoted[user.displayName] ? \"Voted\" : \"Vote\"}\n                        </button>\n                    </div>\n                ))}\n            </div>\n            <br />\n            <div>\n               <h2> {votes} out of {userList.length} people have voted </h2> \n            </div>\n            <br />\n            <br />\n            <br />\n            <br />\n            <div>\n                <div className=\"prompt-card center\" onClick={handlePromptClick}>\n                    <h2>{currentPrompt}</h2>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default GameStateInitial;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}